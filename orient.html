<!DOCTYPE html>

<html>
<head>
	<title>Orientation Detection</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>

<body>

	<p>Initial screen size is: <span id="width"></span> pixels wide by <span id="height"></span> pixels high.</p>

	<p>Initial orientation is: <span id="initial-orientation"></span></p>

	<p>Device orientation is:</p>
	<ul id="orientation"></ul>
	
	<p id="calibrate"></p>




<script>

	window.onload = function () {
		width = window.innerWidth;
		height = window.innerHeight;
		document.getElementById('width').innerHTML = width;
		document.getElementById('height').innerHTML = height;

		document.getElementById('initial-orientation').innerHTML = (width > height ? "Landscape" : "Portrait");
	}

	function orientationCheck (e) {
		if (window.matchMedia("(orientation: portrait)").matches) {
			o = "Portrait";
		}
		else {
			o = "Landscape";
		}

		document.getElementById('orientation').innerHTML =
			"<li>Alpha: " + parseInt(e.alpha) + "</li>" +
			"<li>Beta: " + parseInt(e.beta) + "</li>" +
			"<li>Gamma: " + parseInt(e.gamma) + "</li>" +
			"<li>Orientation: " + o + "</li>";
	}

	function calibrate (e) {
		document.getElementById('calibrate').innerHTML = "Compass needs calibration!";
	}

	window.addEventListener('deviceorientation', orientationCheck, false);
	window.addEventListener('compassneedscalibration', calibrate, true);
</script>
</body>
</html>
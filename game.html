<!DOCTYPE html>

<html>
<head>
	<title>You're Playing Tetris!</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>

<body>

	<p>X coordinate of touch start is <span id="start-x"></span></p>
	<p>Y coordinate of touch start is <span id="start-y"></span></p>

	<p>X coordinate of touch start is <span id="end-x"></span></p>
	<p>Y coordinate of touch end is <span id="end-y"></span></p>

	<p>The change in X is <span id="change-x"></span></p>
	<p>The change in Y is <span id="change-y"></span></p>

	<p>Touch type is <span id="type"></span>

	<p>Device orientation is:</p>
	<ul id="orientation"></ul>

	<p id="calibrate"></p>

<script>
	var startX;
	var startY;

	function touchStart(e)
	{
		e.preventDefault();

		var touch = e.changedTouches[0];
		
		startX = touch.clientX;
		startY = touch.clientY;
		
		document.getElementById('start-x').innerHTML = startX;
		document.getElementById('start-y').innerHTML = startY;

	}

	function touchEnd(e)
	{
		e.preventDefault();

		var touch = e.changedTouches[0];
		
		endX = touch.clientX;
		endY = touch.clientY;
		
		document.getElementById('end-x').innerHTML = endX;
		document.getElementById('end-y').innerHTML = endY;

		changeX = startX-endX;
		changeY = startY-endY;

		document.getElementById('change-x').innerHTML = changeX;
		document.getElementById('change-y').innerHTML = changeY;


		if (Math.abs(changeX) < 7 && Math.abs(changeY) < 7) {	// Tap
			type = "Tap";
		}
		else {
			if (Math.abs(changeX) > Math.abs(changeY)) {	 // Left or right swipe
				if (changeX > 0) {
					type = "Swipe left";
				}
				else {
					type = "Swipe right";
				}
			}
			else {											// Up or down swipe
				if (changeY > 0) {
					type = "Swipe up";
				}
				else {
					type = "Swipe down";
				}
			}
		}

		document.getElementById('type').innerHTML = type;

	}

	function orientationCheck (e) {
		document.getElementById('orientation').innerHTML =
			"<li>Alpha: " + parseInt(e.alpha) + "</li>" +
			"<li>Beta: " + parseInt(e.beta) + "</li>" +
			"<li>Gamma: " + parseInt(e.gamma) + "</li>";
	}

	function calibrate (e) {
		document.getElementById('calibrate').innerHTML = "Compass needs calibration!";
	}

	window.addEventListener('touchstart', touchStart, false);
	window.addEventListener('touchend', touchEnd, false);
	window.addEventListener('deviceorientation', orientationCheck, false);
	window.addEventListener('compassneedscalibration', calibrate, true);
</script>
</body>
</html>